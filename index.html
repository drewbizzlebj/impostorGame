<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego del Impostor - F√∫tbol</title>
    <style>
        body {
            margin: 0;
            padding: 10px;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            box-sizing: border-box;
        }

        .container {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 500px;
            box-sizing: border-box;
        }

        h1 {
            margin-bottom: 20px;
            font-size: clamp(1.8rem, 5vw, 2.5rem);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
        }

        #display {
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            font-size: clamp(1.2rem, 4vw, 2rem);
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            word-break: break-word;
            hyphens: auto;
            padding: 0 10px;
            box-sizing: border-box;
        }

        #playButton {
            background: linear-gradient(45deg, #00c851, #007e33);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: clamp(1rem, 3.5vw, 1.3rem);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px rgba(0, 200, 81, 0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
            width: 100%;
            max-width: 300px;
            min-height: 50px;
            box-sizing: border-box;
        }

        #resetButton {
            margin-top: 15px;
            background: linear-gradient(45deg, #ff4444, #cc0000);
            padding: 10px 20px;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
            border-radius: 50px;
            border: none;
            color: white;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(255, 68, 68, 0.3);
            font-weight: bold;
            text-transform: uppercase;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 300px;
            box-sizing: border-box;
        }

        #resetButton:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 68, 68, 0.4);
        }

        #playButton:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 200, 81, 0.4);
        }

        #playButton:disabled {
            background: #666;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        .instructions {
            margin-top: 20px;
            font-size: clamp(0.9rem, 2.5vw, 1.1rem);
            opacity: 0.9;
            line-height: 1.6;
            padding: 0 10px;
            box-sizing: border-box;
        }

        .instructions p {
            margin: 8px 0;
        }

        .impostor {
            color: #ff4444 !important;
            animation: pulse 0.5s ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .progress {
            margin: 15px 0;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
            width: 100%;
            box-sizing: border-box;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(45deg, #00c851, #007e33);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Responsive breakpoints */
        @media (max-width: 768px) {
            body {
                padding: 5px;
            }
            
            .container {
                padding: 15px;
                margin: 5px;
            }
            
            h1 {
                margin-bottom: 15px;
            }
            
            #display {
                margin: 15px 0;
                min-height: 50px;
            }
            
            .instructions {
                margin-top: 15px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 12px;
                border-radius: 15px;
            }
            
            #playButton {
                padding: 10px 20px;
                min-height: 45px;
            }
            
            .progress {
                height: 5px;
            }
        }

        @media (orientation: landscape) and (max-height: 600px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                margin-bottom: 10px;
            }
            
            #display {
                margin: 10px 0;
                min-height: 40px;
            }
            
            .instructions {
                margin-top: 10px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚öΩ Encuentra al Impostor ‚öΩ</h1>
        
        <div id="display">¬°Presiona el bot√≥n para comenzar!</div>
        
        <div class="progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        
        <button id="playButton">üéÆ JUGADOR 1</button>
        
        <button id="resetButton" style="margin-top: 15px; background: linear-gradient(45deg, #ff4444, #cc0000); padding: 10px 20px; font-size: 1rem; border-radius: 50px; border: none; color: white; cursor: pointer; box-shadow: 0 5px 15px rgba(255, 68, 68, 0.3); font-weight: bold; text-transform: uppercase;">
            üîÑ RESETEAR JUGADORES
        </button>
        
        <div class="instructions">
            <p>üìã <strong>Instrucciones:</strong></p>
            <p>‚Ä¢ Cada persona toca el bot√≥n una vez</p>
            <p>‚Ä¢ Aparece un jugador durante 1 segundo</p>
            <p>‚Ä¢ Despu√©s de 5 personas, uno habr√° visto <span style="color: #ff4444;">IMPOSTOR</span></p>
            <p>‚Ä¢ ¬°Descubran qui√©n fue el impostor!</p>
        </div>
    </div>

    <script>
        // Lista de jugadores de f√∫tbol - Los 100 m√°s famosos + personalizados
        const jugadores = [
            // Los Dioses del F√∫tbol
            'Lionel Messi', 'Diego Armando Maradona', 'Pel√©', 'Cristiano Ronaldo', 'Johan Cruyff',
            'Zinedine Zidane', 'Ronaldinho', 'Ronaldo Naz√°rio', 'Alfredo Di St√©fano', 'Franz Beckenbauer',
            
            // Leyendas Absolutas (con cambios personalizados)
            'Turroneta', 'Flaco L√≥pez', 'Garrincha', 'Roberto Baggio', 'Marco van Basten',
            'Franco Baresi', 'Paolo Maldini', 'Tetilla', 'Eusebio', 'Luka Modriƒá',
            'Andr√©s Iniesta', 'Xavi Hern√°ndez', 'Thierry Henry', 'Kak√°', 'Lothar Matth√§us',
            'Ruud Gullit', 'Dennis Bergkamp', 'Baleado', 'Rom√°rio', 'Thomsen',
            
            // Estrellas Hist√≥ricas
            'Kylian Mbapp√©', 'Neymar Jr', 'Erling Haaland', 'Kevin De Bruyne', 'Robert Lewandowski',
            'Karim Benzema', 'Mohamed Salah', 'Virgil van Dijk', 'Sadio Man√©', 'Paul Pogba',
            'Antoine Griezmann', 'Harry Kane', 'Sergio Ramos', 'Toni Kroos', 'N\'Golo Kant√©',
            'Joshua Kimmich', 'Jadon Sancho', 'Phil Foden', 'Pedri', 'Jude Bellingham',
            'Vin√≠cius Jr', 'Rafael Le√£o', 'Bruno Fernandes', 'Son Heung-min', 'Jan Oblak',
            'Alisson Becker', 'Manuel Neuer', 'Thibaut Courtois', 'Marc-Andr√© ter Stegen',
            
            // Grandes del Pasado y Presente
            'Cafu', 'Roberto Carlos', 'Rivaldo', 'Ra√∫l Gonz√°lez', 'Iker Casillas',
            'Gianluigi Buffon', 'Andrea Pirlo', 'Francesco Totti', 'Steven Gerrard', 'Frank Lampard',
            'John Terry', 'Rio Ferdinand', 'Patrick Vieira', 'Claude Mak√©l√©l√©', 'Didier Drogba',
            'Samuel Eto\'o', 'Zlatan Ibrahimoviƒá', 'Luis Su√°rez', 'Edinson Cavani', 'Arturo Vidal',
            'Alexis S√°nchez', 'James Rodr√≠guez', 'Radamel Falcao', 'Carlos T√©vez', '√Ångel Di Mar√≠a',
            'Paulo Dybala', 'Lautaro Mart√≠nez', 'Sergio Ag√ºero', 'David Silva', 'Cesc F√†bregas',
            'Gerard Piqu√©', 'Jordi Alba', 'Dani Alves', 'Marcelo', 'Casemiro',
            'Fabinho', 'Thiago Silva', 'Marquinhos',
            
            // Jugadores actuales de BOCA JUNIORS
            'Sergio Romero', 'Marcos Rojo', 'Nicol√°s Figal', 'Frank Fabra', 'Jorman Campuzano',
            'Guillermo Fern√°ndez', 'Pol Fern√°ndez', 'Oscar Romero', 'Sebasti√°n Villa', 'Dar√≠o Benedetto',
            'Luis V√°zquez', 'Norberto Briasco', 'Alan Varela', 'Ezequiel Fern√°ndez', 'Bruno Valdez',
            'Luis Adv√≠ncula', 'Facundo Roncaglia', 'Agust√≠n Rossi', 'Javier Garc√≠a', 'Cristian Medina',
            
            // Jugadores actuales de RIVER PLATE
            'Franco Armani', 'Milton Casco', 'Paulo D√≠az', 'Germ√°n Pezzella', 'Enzo D√≠az',
            'Rodrigo Aliendro', 'Enzo P√©rez', 'Nacho Fern√°ndez', 'Nicol√°s De La Cruz', 'Miguel Borja',
            'Lucas Beltr√°n', 'Esequiel Barco', 'Mat√≠as Su√°rez', 'Salom√≥n Rond√≥n', 'Agust√≠n Palavecino',
            'Robert Rojas', 'Leandro Gonz√°lez P√≠rez', 'Andr√©s Herrera', 'Jos√© Paradela', 'Braian Romero',
            
            // Jugadores adicionales
            'Deyverson', 'Gabigol', 'Vitor Roque', 'Gustavo G√≥mez', 'Pity Mart√≠nez', 
            'Juanfer Quintero', 'Soteldo', 'Vicky Denis', 'La Ecuatoriana'
        ];

        const playButton = document.getElementById('playButton');
        const resetButton = document.getElementById('resetButton');
        const display = document.getElementById('display');
        const progressBar = document.getElementById('progressBar');

        let jugadorActual = 1;
        let esperandoSiguiente = false;
        let jugadorSeleccionado = '';
        let posicionImpostor = 0;
        let secuencia = [];
        let jugadoresUsados = [];

        // Cargar jugadores usados del almacenamiento al iniciar
        async function cargarJugadoresUsados() {
            try {
                const resultado = await window.storage.get('jugadores-usados', false);
                if (resultado && resultado.value) {
                    jugadoresUsados = JSON.parse(resultado.value);
                    console.log(`Cargados ${jugadoresUsados.length} jugadores usados`);
                }
            } catch (error) {
                console.log('No hay jugadores usados guardados, empezando desde cero');
                jugadoresUsados = [];
            }
        }

        // Guardar jugadores usados en el almacenamiento
        async function guardarJugadoresUsados() {
            try {
                await window.storage.set('jugadores-usados', JSON.stringify(jugadoresUsados), false);
                console.log('Jugadores usados guardados');
            } catch (error) {
                console.error('Error al guardar jugadores usados:', error);
            }
        }

        // Resetear todos los jugadores
        async function resetearJugadores() {
            try {
                await window.storage.delete('jugadores-usados', false);
                jugadoresUsados = [];
                alert('‚úÖ ¬°Lista de jugadores reseteada! Todos los jugadores est√°n disponibles de nuevo.');
                console.log('Jugadores usados reseteados');
            } catch (error) {
                console.error('Error al resetear:', error);
                jugadoresUsados = [];
                alert('‚úÖ ¬°Lista reseteada!');
            }
        }

        playButton.addEventListener('click', manejarClick);
        resetButton.addEventListener('click', resetearJugadores);

        async function iniciarNuevaRonda() {
            jugadorActual = 1;
            esperandoSiguiente = false;
            
            // Si ya usamos todos los jugadores, reiniciar la lista autom√°ticamente
            if (jugadoresUsados.length >= jugadores.length) {
                jugadoresUsados = [];
                await guardarJugadoresUsados();
                alert('üéâ ¬°Se usaron todos los jugadores! La lista se reinici√≥ autom√°ticamente.');
            }
            
            // Seleccionar jugador aleatorio que NO haya sido usado
            let jugadoresDisponibles = jugadores.filter(j => !jugadoresUsados.includes(j));
            jugadorSeleccionado = jugadoresDisponibles[Math.floor(Math.random() * jugadoresDisponibles.length)];
            
            // Agregar el jugador a la lista de usados y guardar
            jugadoresUsados.push(jugadorSeleccionado);
            await guardarJugadoresUsados();
            
            // Determinar posici√≥n del impostor (1-5)
            posicionImpostor = Math.floor(Math.random() * 5) + 1;
            
            // Crear secuencia: 4 veces el mismo jugador + 1 impostor
            secuencia = [];
            for (let i = 1; i <= 5; i++) {
                if (i === posicionImpostor) {
                    secuencia.push('IMPOSTOR');
                } else {
                    secuencia.push(jugadorSeleccionado);
                }
            }
            
            progressBar.style.width = '0%';
            display.textContent = '¬°Jugador 1, presiona el bot√≥n!';
            playButton.textContent = 'üéÆ JUGADOR 1';
        }

        function manejarClick() {
            if (esperandoSiguiente) {
                // Estado: esperando al siguiente jugador
                jugadorActual++;
                esperandoSiguiente = false;
                
                if (jugadorActual <= 5) {
                    display.textContent = `¬°Jugador ${jugadorActual}, presiona el bot√≥n!`;
                    playButton.textContent = `üéÆ JUGADOR ${jugadorActual}`;
                } else {
                    // Terminar ronda
                    display.textContent = `üéØ ¬°Ronda terminada! El impostor era el jugador #${posicionImpostor}`;
                    playButton.textContent = 'üéÆ NUEVA RONDA';
                    setTimeout(() => {
                        iniciarNuevaRonda();
                    }, 3000);
                }
            } else {
                // Estado: mostrar jugador
                mostrarJugador();
            }
        }

        function mostrarJugador() {
            // Deshabilitar bot√≥n temporalmente
            playButton.disabled = true;
            playButton.textContent = '‚è≥ MOSTRANDO...';
            
            // Actualizar progreso
            progressBar.style.width = `${(jugadorActual / 5) * 100}%`;
            
            // Obtener y mostrar el jugador/impostor
            const elemento = secuencia[jugadorActual - 1];
            display.textContent = elemento;
            
            // Estilo especial para impostor
            if (elemento === 'IMPOSTOR') {
                display.classList.add('impostor');
            } else {
                display.classList.remove('impostor');
            }
            
            // Despu√©s de 1 segundo, cambiar a estado "siguiente"
            setTimeout(() => {
                display.classList.remove('impostor');
                esperandoSiguiente = true;
                playButton.disabled = false;
                
                if (jugadorActual < 5) {
                    display.textContent = '¬øListo? ¬°Siguiente jugador!';
                    playButton.textContent = '‚úÖ SIGUIENTE';
                } else {
                    display.textContent = '¬øListos para ver el resultado?';
                    playButton.textContent = 'üéØ VER RESULTADO';
                }
            }, 1000);
        }

        // Inicializar - cargar jugadores usados del almacenamiento
        cargarJugadoresUsados().then(() => {
            iniciarNuevaRonda();
        });
    </script>
</body>
</html>